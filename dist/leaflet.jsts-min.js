!function(){function t(t,n){var o=this.getJstsGeometry(),e=n.getJstsGeometry();if(arguments.length<3)return o[t](e);var i=[e].concat(u.call(arguments,2));return o[t].apply(o,i)}function n(t,n){var o,e=this.getJstsGeometry(),i=n.getJstsGeometry();if(arguments.length<3)o=e[t](i);else{var l=[i].concat(u.call(arguments,2));o=e[t].apply(e,l)}if(!o.isEmpty())return h.from(o,this.options);if(n=new this.constructor([],this.options),this instanceof L.MultiPolygon)n._jstsGeometry=s;else if(this instanceof L.MultiPolyline)n._jstsGeometry=g;else if(this instanceof L.Polygon)n._jstsGeometry=r;else{if(!(this instanceof L.Polyline))throw new Error("Unsupported L.Path type");n._jstsGeometry=a}return n}var o=["intersects","within"],e=["intersection","union","difference"],i=new jsts.geom.GeometryFactory,r=i.createPolygon(i.createLinearRing([]),[]),s=i.createMultiPolygon([r]),a=i.createLineString([]),g=i.createMultiLineString([a]),l={},c={},u=Array.prototype.slice;o.forEach(function(n){c[n]=function(){return t.apply(this,[n].concat(u.call(arguments,0)))}}),e.forEach(function(t){l[t]=function(){return n.apply(this,[t].concat(u.call(arguments,0)))}}),L.Path.include(c),L.Path.include(l),L.Path.include({getJstsGeometry:function(){return this._jstsGeometry||(this._jstsGeometry=f.from(this)),this._jstsGeometry}});var h={from:function(t,n){var o,e,i;if(t instanceof jsts.geom.MultiPolygon)o=this.multiPolygonToLatLngs(t),e=L.MultiPolygon;else if(t instanceof jsts.geom.MultiLineString)o=this.multiLineStringToLatLngs(t),e=L.MultiPolyline;else if(t instanceof jsts.geom.Polygon)o=this.polygonToLatLngs(t),e=L.Polygon;else{if(!(t instanceof jsts.geom.LineString))throw new Error("Unsupported geometry");o=this.lineStringToCoordinates(t),e=L.Polyline}return i=new e(o,n),i._jstsGeometry=t,i},coordinateToLatLng:function(t){return new L.LatLng(t.y,t.x)},coordinatesToLatLngs:function(t){return t.map(this.coordinateToLatLng,this)},linearRingToLatLngs:function(t){return this.coordinatesToLatLngs(t.getCoordinates().slice(0,-1))},lineStringToCoordinates:function(t){return t.getCoordinates().map(this.coordinateToLatLng,this)},multiLineStringToLatLngs:function(t){for(var n=[],o=0,e=t.getNumGeometries();e>o;o++)n.push(this.lineStringToCoordinates(t.getGeometryN(o)));return n},multiPolygonToLatLngs:function(t){for(var n=[],o=0,e=t.getNumGeometries();e>o;o++)n.push(this.polygonToLatLngs(t.getGeometryN(o)));return n},polygonToLatLngs:function(t){for(var n=this.linearRingToLatLngs(t.getExteriorRing()),o=[],e=0,i=t.getNumInteriorRing();i>e;e++)o.push(this.linearRingToLatLngs(t.getInteriorRingN(e)));return o.length?[n].concat(o):n}},f={from:function(t){var n,o;if(t instanceof L.MultiPolygon)return n=t.getLatLngs().map(this.multiLatLngsToCoordinates,this),o=n.map(this.coordinatesToPolygon,this),i.createMultiPolygon(o);if(t instanceof L.MultiPolyline)return n=latlngs.getLatLngs().map(this.multiLatLngsToCoordinates,this),o=n.map(this.coordinatesToLineString,this),i.createMultiLineString(o);if(t instanceof L.Polygon)return n=this.multiLatLngsToCoordinates(t.getLatLngs()),this.coordinatesToPolygon(n);if(t instanceof L.Polyline)return n=this.latLngsToCoordinates(t.getLatLngs()),this.coordinatesToLineString(n);throw new Error("Unsupported layer")},coordinatesToLinearRing:function(t){return i.createLinearRing(t.concat(t[0]))},coordinatesToLineString:function(t){return i.createLineString(t)},coordinatesToPolygon:function(t){var n=t.map(this.coordinatesToLinearRing,this);return n.length<2?i.createPolygon(n[0],[]):i.createPolygon(n[0],n.slice(1))},latLngToCoordinate:function(t){return new jsts.geom.Coordinate(t.lng,t.lat)},latLngsToCoordinates:function(t){return t.map(this.latLngToCoordinate,this)},multiLatLngsToCoordinates:function(t){return t.length?Array.isArray(t[0])?t.map(this.latLngsToCoordinates,this):[t.map(this.latLngToCoordinate,this)]:[]}}}();